## Otsu's Method
Otsu's method is a global image thresholding technique used to separate the foreground and background of an image. 
### Here are the steps to calculate Otsu's threshold:
1. Compute the histogram of the image: Count the number of pixels for each intensity value in the image.
2. Compute the cumulative sum and cumulative mean of the histogram. The cumulative sum represents the number of pixels up to a certain intensity level. The cumulative mean represents the average intensity of the pixels up to a certain intensity level.
3. Compute the between-class variance. This is the variance between the intensity values of the two classes (foreground and background) in the image. The between-class variance is computed using the following formula:
    ```python
    
   between_class_variance = cumulative_sum[:-1] * (cumulative_sum[-1] - cumulative_sum[:-1]) * (cumulative_mean[:-1] - cumulative_mean[-1])**2
   
    ```
   where cumulative_sum is the cumulative sum of the histogram and cumulative_mean is the cumulative mean of the histogram.
   
4. The threshold value is the intensity level that maximizes the between-class variance. The threshold value is computed as follows:
    ```python
    
    threshold = np.argmax(between_class_variance)

    ```
5. Finally, the binary image can be generated by applying the threshold to the original image. Pixels with intensity values greater than the threshold are set to 1 and pixels with intensity values less than the threshold are set to 0.
   
   Here's a sample code in Python to compute the Otsu's threshold:
    ```python
        
    import numpy as np

    def otsu_threshold(image):
        histogram = np.histogram(image, bins=np.arange(257), range=(0, 256))[0]
        cumulative_sum = np.cumsum(histogram)
        cumulative_mean = np.cumsum(histogram * np.arange(256)) / (cumulative_sum + 1e-10)
        between_class_variance = cumulative_sum[:-1] * (cumulative_sum[-1] - cumulative_sum[:-1]) * (cumulative_mean[:-1] - cumulative_mean[-1])**2
        threshold = np.argmax(between_class_variance)
        return threshold
        
    ```

## Full Code Otsu Threshold

```python

import numpy as np
from PIL import Image


def otsu_threshold(image):
    histogram = np.histogram(image, bins=np.arange(257), range=(0, 256))[0]
    cumulative_sum = np.cumsum(histogram)
    cumulative_mean = np.cumsum(
        histogram * np.arange(256)) / (cumulative_sum + 1e-10)
    between_class_variance = cumulative_sum[:-1] * (
        cumulative_sum[-1] - cumulative_sum[:-1]) * (cumulative_mean[:-1] - cumulative_mean[-1])**2
    threshold = np.argmax(between_class_variance)
    return threshold


def apply_threshold(image, threshold):
    return (image > threshold).astype(int)

def grayscale(img):
    return np.dot(img[..., :3], [0.2989, 0.5870, 0.1140])

# Load the image
image = Image.open('cropfaces.jpg')
image = np.array(image)
image = grayscale(image)

# Compute the threshold
threshold = otsu_threshold(image)

# Apply the threshold to the image
binary_image = apply_threshold(image, threshold)

# Convert binary image back to image object
#binary_image = Image.fromarray(binary_image.astype('uint8') * 255)

# Save the binary image
#binary_image.save('binary_image.jpg')

print( binary_image )

```


